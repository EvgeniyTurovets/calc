{"version":3,"sources":["main.js"],"names":["document","addEventListener","form","querySelector","Pristine","addValidator","value","param1","param2","parseInt","indexOf","pristine","classTo","errorClass","successClass","errorTextParent","errorTextTag","errorTextClass","e","preventDefault","valid","validate","classList","add","Inputmask","mask","querySelectorAll","getElementById","form1__typeInput","form1__type","form1__type__arr","total","totalInput","priceInput","formCounter","forEach","el","refreshCoef","val","getAttribute","input","index","setAttribute","coef","price","totalPrice","Math","floor","textContent","count","length","addTech","htmlBlock","target","closest","remove","addTechF","htmlBlockClone","cloneNode","appendChild"],"mappings":"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","file":"main.js","sourcesContent":["\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    let form = document.querySelector('.calc')\n\n    // валидация\n    Pristine.addValidator(\"my-range\", function(value, param1, param2) {\n        return parseInt(param1) <= value && value <= parseInt(param2) \n    }, \"Значение должно быть не больше ${2}\", 5, false);\n\n\n    Pristine.addValidator(\"my-range2\", function(value) {\n        return value.indexOf('_') == -1\n    }, \"Телефон указан неверно\", 5, false);\n\n    var pristine = new Pristine(form,{\n        classTo: 'form-group',\n        errorClass: 'error',\n        successClass: 'has-success',\n        // class of the parent element where error text element is appended\n        errorTextParent: 'form-group',\n        // type of element to create for the error text\n        errorTextTag: 'div',\n        // class of the error text element\n        errorTextClass: 'error__text' \n    });\n    \n    form.addEventListener('submit', function (e) {\n        e.preventDefault();\n        \n        // check if the form is valid\n        var valid = pristine.validate(); // returns true or false\n        if(valid){\n            form.classList.add('active')\n        }\n    });\n\n\n    Inputmask({\"mask\": \"+7 (999) 999-99-99\"}).mask(document.querySelectorAll(\".phone\"));\n\n\n    // Калькулятор Своё дело. КАСКО\n    if(document.getElementById('form1')){\n\n        // Поля формы\n        let form1__typeInput = document.getElementById('form1__typeInput').querySelectorAll('input')\n        let form1__type = document.querySelectorAll('.form1__type')\n        let form1__type__arr = [\n            [1.8, 2.5, 1, 4],\n            [1.08, 1.5, 0.6, 2.4],\n        ]\n        let total = document.getElementById('total')\n        let totalInput = document.getElementById('total-input') \n        let priceInput = document.getElementById('price')\n\n        // подписка на события\n        priceInput.addEventListener('input', ()=>{\n            formCounter();\n        })\n\n        form.querySelectorAll('input').forEach(el=> el.addEventListener('change', ()=>{\n            formCounter();\n        }))\n\n        form.querySelectorAll('input').forEach(el=> el.addEventListener('input', ()=>{\n            formCounter();\n        }))\n\n        form1__type.forEach(el=> el.addEventListener('change', ()=>{\n            refreshCoef(el)\n        }))\n\n        // Изменить кофициенты\n        const refreshCoef = (el)=>{\n            let val = el.getAttribute('value')\n\n            form1__typeInput.forEach((input, index)=>{\n                input.setAttribute('value', form1__type__arr[val][index])\n            })\n\n            formCounter();\n        }\n        \n        // Расчет премии\n        const formCounter = () =>{\n            let coef = document.getElementById('form1__typeInput').querySelector('input:checked').value\n            let price = document.getElementById('price').value\n\n            let totalPrice = coef / 100 * price\n            totalPrice = Math.floor(totalPrice)\n\n            total.textContent = totalPrice;\n            totalInput.setAttribute('value', totalPrice)\n        }\n\n        formCounter();\n\n    }\n\n    // Калькулятор Своё дело.\n    // Спецтехника\n    if(document.getElementById('form2')){\n        let total = document.getElementById('total')\n        let totalInput = document.getElementById('total-input') \n\n        form.querySelectorAll('input').forEach(el=> el.addEventListener('change', ()=>{\n            formCounter();\n        }))\n\n        form.querySelectorAll('input').forEach(el=> el.addEventListener('input', ()=>{\n            formCounter();\n        }))\n\n\n        const formCounter = () =>{\n            let price = document.getElementById('price').value\n            let coef = 0.13;\n            let count = document.querySelectorAll('.form2__row').length\n\n            let totalPrice = price * coef * count;\n            totalPrice = Math.floor(totalPrice);\n\n            total.textContent = totalPrice;\n            totalInput.setAttribute('value', totalPrice)\n        }\n\n        formCounter();\n\n        let addTech = document.getElementById('add-tech')\n        let htmlBlock = document.querySelector('.form2__row');\n\n        document.addEventListener('click', (e)=>{\n            \n            if(e.target.closest('.delete')){\n                e.target.closest('.form2__row').remove()\n\n                addTech.closest('.calc-add').classList.remove('max')\n                formCounter();\n            }\n        })\n\n        addTech.addEventListener('click', ()=>{\n            addTechF()\n        }) \n\n        const addTechF = ()=>{\n            let count = document.querySelectorAll('.form2__row').length\n\n            let htmlBlockClone = htmlBlock.cloneNode(true)\n            htmlBlockClone.querySelectorAll('.calc__wrap__item input').forEach((el)=>{\n                el.setAttribute('name', count + 1)\n            })\n            \n            if(count <= 4){\n                document.querySelector('.form2__row-wrap').appendChild(htmlBlockClone)\n                document.querySelector('.form2__row-wrap').classList.add('active')\n                if(count == 4){\n                    addTech.closest('.calc-add').classList.add('max')\n                }\n\n                formCounter();\n\n                pristine = new Pristine(form,{\n                    classTo: 'form-group',\n                    errorClass: 'error',\n                    successClass: 'has-success',\n                    // class of the parent element where error text element is appended\n                    errorTextParent: 'form-group',\n                    // type of element to create for the error text\n                    errorTextTag: 'div',\n                    // class of the error text element\n                    errorTextClass: 'error__text' \n                });\n            }\n        }\n    }\n\n})\n"]}