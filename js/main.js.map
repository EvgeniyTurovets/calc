{"version":3,"sources":["main.js"],"names":["document","addEventListener","getElementById","form1","Pristine","addValidator","value","param1","param2","parseInt","indexOf","pristine","classTo","errorClass","successClass","errorTextParent","errorTextTag","errorTextClass","e","preventDefault","valid","validate","classList","add","Inputmask","mask","querySelectorAll","form1__typeInput","form1__type","form1__type__arr","total","totalInput","priceInput","formCounter","forEach","el","refreshCoef","val","getAttribute","input","index","setAttribute","coef","querySelector","price","totalPrice","Math","floor","textContent"],"mappings":"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","file":"main.js","sourcesContent":["\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n    // расчет формы (Калькулятор Своё дело. КАСКО)\n    if(document.getElementById('form1')){\n\n        let form1 = document.getElementById('form1')\n\n        // валидация\n        Pristine.addValidator(\"my-range\", function(value, param1, param2) {\n            return parseInt(param1) <= value && value <= parseInt(param2) \n        }, \"Значение должно быть не больше ${2}\", 5, false);\n\n\n        Pristine.addValidator(\"my-range2\", function(value) {\n            return value.indexOf('_') == -1\n        }, \"Телефон указан неверно\", 5, false);\n\n        var pristine = new Pristine(form1,{\n            classTo: 'form-group',\n            errorClass: 'error',\n            successClass: 'has-success',\n            // class of the parent element where error text element is appended\n            errorTextParent: 'form-group',\n            // type of element to create for the error text\n            errorTextTag: 'div',\n            // class of the error text element\n            errorTextClass: 'error__text' \n        });\n        \n        form1.addEventListener('submit', function (e) {\n            e.preventDefault();\n            \n            // check if the form is valid\n            var valid = pristine.validate(); // returns true or false\n            if(valid){\n                form1.classList.add('active')\n            }\n        });\n\n\n        Inputmask({\"mask\": \"+7 (999) 999-99-99\"}).mask(document.querySelectorAll(\".phone\"));\n\n        // Поля формы\n        let form1__typeInput = document.getElementById('form1__typeInput').querySelectorAll('input')\n        let form1__type = document.querySelectorAll('.form1__type')\n        let form1__type__arr = [\n            [1.8, 2.5, 1, 4],\n            [1.08, 1.5, 0.6, 2.4],\n        ]\n        let total = document.getElementById('total')\n        let totalInput = document.getElementById('total-input') \n        let priceInput = document.getElementById('price')\n\n        // подписка на события\n        priceInput.addEventListener('input', ()=>{\n            formCounter();\n        })\n\n        form1.querySelectorAll('input').forEach(el=> el.addEventListener('change', ()=>{\n            formCounter();\n        }))\n\n        form1__type.forEach(el=> el.addEventListener('change', ()=>{\n            refreshCoef(el)\n        }))\n\n        // Изменить кофициенты\n        const refreshCoef = (el)=>{\n            let val = el.getAttribute('value')\n\n            form1__typeInput.forEach((input, index)=>{\n                input.setAttribute('value', form1__type__arr[val][index])\n            })\n\n            formCounter();\n        }\n        \n        // Расчет премии\n        const formCounter = () =>{\n            let coef = document.getElementById('form1__typeInput').querySelector('input:checked').value\n            let price = document.getElementById('price').value\n\n            let totalPrice = coef / 100 * price\n            totalPrice = Math.floor(totalPrice)\n\n            total.textContent = totalPrice;\n            totalInput.setAttribute('value', totalPrice)\n        }\n\n        formCounter();\n\n    }\n    \n\n})\n"]}